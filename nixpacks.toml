[phases.setup]
nixPkgs = ['nodejs', 'python311', 'yarn']

[phases.install]
cmds = [
    'cd frontend && yarn install --frozen-lockfile',
    'cd backend && pip install -r requirements.txt'
]

[phases.build]
cmds = [
    'cd frontend && yarn build'
]

[start]
cmd = 'cd backend && python -m uvicorn server:app --host 0.0.0.0 --port $PORT'

[variables]
# Railway will provide DATABASE_URL automatically when PostgreSQL is added
PORT = "8001"